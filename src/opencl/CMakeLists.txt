set(
	SGE_OPENCL_FILES
	include/sge/opencl/binary_error_data.hpp
	include/sge/opencl/clinclude.hpp
	include/sge/opencl/command_queue/dim1.hpp
	include/sge/opencl/command_queue/dim2.hpp
	include/sge/opencl/command_queue/dim3.hpp
	include/sge/opencl/command_queue/enqueue_kernel.hpp
	include/sge/opencl/command_queue/execution_mode.hpp
	include/sge/opencl/command_queue/object.hpp
	include/sge/opencl/command_queue/object_fwd.hpp
	include/sge/opencl/command_queue/profiling_mode.hpp
	include/sge/opencl/command_queue/scoped.hpp
	include/sge/opencl/command_queue/scoped_buffer_mapping.hpp
	include/sge/opencl/command_queue/scoped_planar_mapping.hpp
	include/sge/opencl/context/error_callback.hpp
	include/sge/opencl/context/error_callback_type.hpp
	include/sge/opencl/context/object.hpp
	include/sge/opencl/context/object_fwd.hpp
	include/sge/opencl/context/optional_error_callback.hpp
	include/sge/opencl/context/parameters.hpp
	include/sge/opencl/context/parameters_fwd.hpp
	include/sge/opencl/device/object.hpp
	include/sge/opencl/device/object_fwd.hpp
	include/sge/opencl/device/object_ref_sequence.hpp
	include/sge/opencl/device/object_sequence.hpp
	include/sge/opencl/error_information_string.hpp
	include/sge/opencl/extension_sequence.hpp
	include/sge/opencl/kernel/argument_index.hpp
	include/sge/opencl/kernel/local_buffer.hpp
	include/sge/opencl/kernel/local_buffer_fwd.hpp
	include/sge/opencl/kernel/name.hpp
	include/sge/opencl/kernel/numeric_type.hpp
	include/sge/opencl/kernel/object.hpp
	include/sge/opencl/kernel/object_fwd.hpp
	include/sge/opencl/memory_object/base.hpp
	include/sge/opencl/memory_object/base_fwd.hpp
	include/sge/opencl/memory_object/base_ref_sequence.hpp
	include/sge/opencl/memory_object/buffer.hpp
	include/sge/opencl/memory_object/buffer_fwd.hpp
	include/sge/opencl/memory_object/byte_offset.hpp
	include/sge/opencl/memory_object/byte_size.hpp
	include/sge/opencl/memory_object/create_image_format.hpp
	include/sge/opencl/memory_object/dim1.hpp
	include/sge/opencl/memory_object/dim2.hpp
	include/sge/opencl/memory_object/dim3.hpp
	include/sge/opencl/memory_object/flags.hpp
	include/sge/opencl/memory_object/flags_field.hpp
	include/sge/opencl/memory_object/image/format_output.hpp
	include/sge/opencl/memory_object/image/format_sequence.hpp
	include/sge/opencl/memory_object/image/opencl_color_format_to_sge.hpp
	include/sge/opencl/memory_object/image/planar.hpp
	include/sge/opencl/memory_object/image/planar_fwd.hpp
	include/sge/opencl/memory_object/image/planar_pitch.hpp
	include/sge/opencl/memory_object/image/read_planar.hpp
	include/sge/opencl/memory_object/image/sge_color_format_to_opencl.hpp
	include/sge/opencl/memory_object/image/volume.hpp
	include/sge/opencl/memory_object/image/volume_fwd.hpp
	include/sge/opencl/memory_object/rect.hpp
	include/sge/opencl/memory_object/renderer_buffer_lock_mode.hpp
	include/sge/opencl/memory_object/scoped_objects.hpp
	include/sge/opencl/memory_object/size_type.hpp
	include/sge/opencl/memory_object/vector1.hpp
	include/sge/opencl/memory_object/vector2.hpp
	include/sge/opencl/memory_object/vector3.hpp
	include/sge/opencl/optional_renderer.hpp
	include/sge/opencl/platform/object.hpp
	include/sge/opencl/platform/object_fwd.hpp
	include/sge/opencl/platform/object_sequence.hpp
	include/sge/opencl/profile_type.hpp
	include/sge/opencl/program/blob.hpp
	include/sge/opencl/program/build_error.hpp
	include/sge/opencl/program/build_options.hpp
	include/sge/opencl/program/build_parameters.hpp
	include/sge/opencl/program/build_parameters_fwd.hpp
	include/sge/opencl/program/device_blob_map.hpp
	include/sge/opencl/program/file_to_source_string_sequence.hpp
	include/sge/opencl/program/notification_callback.hpp
	include/sge/opencl/program/notification_callback_type.hpp
	include/sge/opencl/program/object.hpp
	include/sge/opencl/program/object_fwd.hpp
	include/sge/opencl/program/optional_build_parameters.hpp
	include/sge/opencl/program/source_string.hpp
	include/sge/opencl/program/source_string_sequence.hpp
	include/sge/opencl/single_device_system/object.hpp
	include/sge/opencl/single_device_system/object_fwd.hpp
	include/sge/opencl/single_device_system/parameters.hpp
	include/sge/opencl/single_device_system/parameters_fwd.hpp
	include/sge/opencl/system.hpp
	include/sge/opencl/system_fwd.hpp
	include/sge/opencl/version.hpp
	src/opencl/command_queue/enqueue_kernel.cpp
	src/opencl/command_queue/object.cpp
	src/opencl/command_queue/scoped.cpp
	src/opencl/command_queue/scoped_buffer_mapping.cpp
	src/opencl/command_queue/scoped_planar_mapping.cpp
	src/opencl/context/object.cpp
	src/opencl/context/parameters.cpp
	src/opencl/device/object.cpp
	src/opencl/handle_error.cpp
	src/opencl/include/sge/src/opencl/declare_local_logger.hpp
	src/opencl/include/sge/src/opencl/handle_error.hpp
	src/opencl/include/sge/src/opencl/log_location.hpp
	src/opencl/include/sge/src/opencl/logger.hpp
	src/opencl/include/sge/src/opencl/memory_object/renderer_buffer_lock_mode_to_cl_mem_flags.hpp
	src/opencl/include/sge/src/opencl/memory_object/to_opencl_mem_flags.hpp
	src/opencl/kernel/local_buffer.cpp
	src/opencl/kernel/object.cpp
	src/opencl/log_location.cpp
	src/opencl/logger.cpp
	src/opencl/memory_object/base.cpp
	src/opencl/memory_object/buffer.cpp
	src/opencl/memory_object/create_image_format.cpp
	src/opencl/memory_object/image/format_output.cpp
	src/opencl/memory_object/image/opencl_color_format_to_sge.cpp
	src/opencl/memory_object/image/planar.cpp
	src/opencl/memory_object/image/read_planar.cpp
	src/opencl/memory_object/image/sge_color_format_to_opencl.cpp
	src/opencl/memory_object/image/volume.cpp
	src/opencl/memory_object/scoped_objects.cpp
	src/opencl/memory_object/to_opencl_mem_flags.cpp
	src/opencl/platform/object.cpp
	src/opencl/program/build_error.cpp
	src/opencl/program/build_parameters.cpp
	src/opencl/program/file_to_source_string_sequence.cpp
	src/opencl/program/object.cpp
	src/opencl/single_device_system/object.cpp
	src/opencl/single_device_system/parameters.cpp
	src/opencl/system.cpp
	src/opencl/version.cpp
)

include_directories(
	${CMAKE_CURRENT_SOURCE_DIR}/include
)

add_definitions(
	-D CL_USE_DEPRECATED_OPENCL_1_1_APIS
)

include_directories(
	${FCPPT_UTILS_INCLUDE_SYSTEM}
	${OPENCL_INCLUDE_DIRS}
)

find_package(
	OpenGL
)

include_directories(
	${FCPPT_UTILS_INCLUDE_SYSTEM}
	${OPENGL_INCLUDE_DIR}
)

if(
	WIN32
)
	set(
		SGE_OPENCL_HAVE_WINDOWS TRUE
	)
else()
	find_file(
		GLX_HEADER
		glx.h
		PATHS "${OPENGL_INCLUDE_DIR}/GL"
	)

	if(
		GLX_HEADER
	)
		set(
			SGE_OPENCL_HAVE_GLX TRUE
		)
	endif()
endif()

configure_file(
	${CMAKE_CURRENT_SOURCE_DIR}/config.hpp.in
	${CMAKE_CURRENT_BINARY_DIR}/include/sge/opencl/config.hpp
)

include_directories(
	${CMAKE_CURRENT_BINARY_DIR}/include
)

add_sge_base_library(
	opencl
	"sgecore;sgeimage;sgeimage2d;sgelog;sgerenderer"
	"${Fcppt_core_LIBRARIES};${Fcppt_filesystem_LIBRARIES};${OPENCL_LIBRARIES};${OPENGL_gl_LIBRARY}"
	""
	""
)
