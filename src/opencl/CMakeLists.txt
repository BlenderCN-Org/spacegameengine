SET(
	SGE_OPENCL_FILES
	include/sge/opencl/binary_error_data.hpp
	include/sge/opencl/command_queue/command_queue.hpp
	include/sge/opencl/command_queue/dim1.hpp
	include/sge/opencl/command_queue/dim2.hpp
	include/sge/opencl/command_queue/dim3.hpp
	include/sge/opencl/command_queue/enqueue_kernel.hpp
	include/sge/opencl/command_queue/execution_mode.hpp
	include/sge/opencl/command_queue/object.hpp
	include/sge/opencl/command_queue/object_fwd.hpp
	include/sge/opencl/command_queue/profiling_mode.hpp
	include/sge/opencl/command_queue/scoped_planar_mapping.hpp
	include/sge/opencl/context/context.hpp
	include/sge/opencl/context/error_callback.hpp
	include/sge/opencl/context/error_callback_type.hpp
	include/sge/opencl/context/object.hpp
	include/sge/opencl/context/object_fwd.hpp
	include/sge/opencl/context/parameters.hpp
	include/sge/opencl/context/parameters_fwd.hpp
	include/sge/opencl/device/device.hpp
	include/sge/opencl/device/object.hpp
	include/sge/opencl/device/object_fwd.hpp
	include/sge/opencl/device/object_ref_sequence.hpp
	include/sge/opencl/device/object_sequence.hpp
	include/sge/opencl/error_information_string.hpp
	include/sge/opencl/extension_sequence.hpp
	include/sge/opencl/kernel/argument_index.hpp
	include/sge/opencl/kernel/kernel.hpp
	include/sge/opencl/kernel/name.hpp
	include/sge/opencl/kernel/object.hpp
	include/sge/opencl/kernel/object_fwd.hpp
	include/sge/opencl/memory_object/base.hpp
	include/sge/opencl/memory_object/base_fwd.hpp
	include/sge/opencl/memory_object/base_ref_sequence.hpp
	include/sge/opencl/memory_object/dim2.hpp
	include/sge/opencl/memory_object/image/format_output.hpp
	include/sge/opencl/memory_object/image/format_sequence.hpp
	include/sge/opencl/memory_object/image/opencl_color_format_to_sge.hpp
	include/sge/opencl/memory_object/image/planar.hpp
	include/sge/opencl/memory_object/image/planar_fwd.hpp
	include/sge/opencl/memory_object/image/planar_pitch.hpp
	include/sge/opencl/memory_object/image/read_planar.hpp
	include/sge/opencl/memory_object/image/sge_color_format_to_opencl.hpp
	include/sge/opencl/memory_object/memory_object.hpp
	include/sge/opencl/memory_object/rect.hpp
	include/sge/opencl/memory_object/renderer_buffer_lock_mode.hpp
	include/sge/opencl/memory_object/scoped_objects.hpp
	include/sge/opencl/memory_object/vertex_buffer.hpp
	include/sge/opencl/opencl.hpp
	include/sge/opencl/platform/object.hpp
	include/sge/opencl/platform/object_fwd.hpp
	include/sge/opencl/platform/object_sequence.hpp
	include/sge/opencl/platform/platform.hpp
	include/sge/opencl/profile_type.hpp
	include/sge/opencl/program/blob.hpp
	include/sge/opencl/program/build_options.hpp
	include/sge/opencl/program/build_parameters.hpp
	include/sge/opencl/program/build_parameters_fwd.hpp
	include/sge/opencl/program/device_blob_map.hpp
	include/sge/opencl/program/notification_callback.hpp
	include/sge/opencl/program/notification_callback_type.hpp
	include/sge/opencl/program/object.hpp
	include/sge/opencl/program/object_fwd.hpp
	include/sge/opencl/program/program.hpp
	include/sge/opencl/program/source_string.hpp
	include/sge/opencl/program/source_string_sequence.hpp
	include/sge/opencl/single_device_system.hpp
	include/sge/opencl/symbol.hpp
	include/sge/opencl/system.hpp
	include/sge/opencl/system_fwd.hpp
	include/sge/opencl/version.hpp
	src/opencl/command_queue/enqueue_kernel.cpp
	src/opencl/command_queue/object.cpp
	src/opencl/command_queue/scoped_planar_mapping.cpp
	src/opencl/context/object.cpp
	src/opencl/context/parameters.cpp
	src/opencl/device/object.cpp
	src/opencl/handle_error.cpp
	src/opencl/handle_error.hpp
	src/opencl/kernel/object.cpp
	src/opencl/memory_object/base.cpp
	src/opencl/memory_object/image/format_output.cpp
	src/opencl/memory_object/image/opencl_color_format_to_sge.cpp
	src/opencl/memory_object/image/planar.cpp
	src/opencl/memory_object/image/read_planar.cpp
	src/opencl/memory_object/image/sge_color_format_to_opencl.cpp
	src/opencl/memory_object/renderer_buffer_lock_mode_to_cl_mem_flags.hpp
	src/opencl/memory_object/scoped_objects.cpp
	src/opencl/memory_object/vertex_buffer.cpp
	src/opencl/platform/object.cpp
	src/opencl/program/build_parameters.cpp
	src/opencl/program/object.cpp
	src/opencl/single_device_system.cpp
	src/opencl/system.cpp
	src/opencl/version.cpp
)

INCLUDE_DIRECTORIES(
	SYSTEM
	${OPENCL_INCLUDE_DIRS}
)

ADD_SGE_BASE_LIBRARY(
	opencl
	"sgerenderer"
)

FIND_PACKAGE(OpenGL)

INCLUDE_DIRECTORIES(
	SYSTEM
	${OPENGL_INCLUDE_DIR}
)

IF(
	WIN32
)
	SET(
		SGE_OPENCL_HAVE_WINDOWS TRUE
	)
ELSE()
	FIND_FILE(
		GLX_HEADER
		glx.h
		PATHS "${OPENGL_INCLUDE_DIR}/GL"
	)

	IF(
		GLX_HEADER
	)
		SET(
			SGE_OPENCL_HAVE_GLX TRUE
		)
	endif()
ENDIF()

CONFIGURE_FILE(
	${CMAKE_CURRENT_SOURCE_DIR}/config.hpp.in
	${CMAKE_CURRENT_BINARY_DIR}/include/sge/opencl/config.hpp
)

INCLUDE_DIRECTORIES(
	${CMAKE_CURRENT_BINARY_DIR}/include
)

TARGET_LINK_LIBRARIES (
	sgeopencl
	${OPENCL_LIBRARIES}
	${OPENGL_gl_LIBRARY}
)
