CHECK_DEPENDENCIES(
	"PARSE"
	"config"
)

CONFIGURE_FILE(
	${CMAKE_SOURCE_DIR}/config_paths.hpp.in
	${CMAKE_BINARY_DIR}/include/sge/config/config_paths.hpp
)

INCLUDE_DIRECTORIES(
	${CMAKE_BINARY_DIR}/include
)

MACRO(
	ADD_SGE_CONFIG_INCLUDE_SOURCE_GROUP
	SOURCEPATH
)
	ADD_SGE_SOURCE_GROUP(
		"include\\\\\\\\sge\\\\\\\\config" #cmake bitch
		${CMAKE_SOURCE_DIR}/include/sge/config
		"${SOURCEPATH}"
		*.hpp
		TEMPFILES
	)

	SET(SGECONFIGFILES ${SGECONFIGFILES} ${TEMPFILES})
ENDMACRO()

ADD_SGE_CONFIG_INCLUDE_SOURCE_GROUP("")

MACRO(
	ADD_SGE_CONFIG_SOURCE_GROUP
	SOURCEPATH
)
	ADD_SGE_SOURCE_GROUP(
		"src\\\\\\\\config"
		""
		"${SOURCEPATH}"
		*.?pp
		TEMPFILES	
	)

	SET(SGECONFIGFILES ${SGECONFIGFILES} ${TEMPFILES})
ENDMACRO()

ADD_SGE_CONFIG_SOURCE_GROUP("")

ADD_LIBRARY (sgeconfig SHARED ${SGECONFIGFILES})

TARGET_LINK_LIBRARIES (
	sgeconfig
	sgecore
	sgeparse
)

INSTALL (TARGETS sgeconfig DESTINATION lib)

INSTALL(DIRECTORY ${CMAKE_SOURCE_DIR}/include/sge/config DESTINATION include/sge)
